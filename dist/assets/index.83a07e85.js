import{S as e,P as t,W as o,M as n,a,b as r,T as i,A as l,B as s,G as c,g as d,c as m,d as p,e as v,R as u}from"./vendor.11f47062.js";!function(e=".",t="__import__"){try{self[t]=new Function("u","return import(u)")}catch(o){const n=new URL(e,location),a=e=>{URL.revokeObjectURL(e.src),e.remove()};self[t]=e=>new Promise(((o,r)=>{const i=new URL(e,n);if(self[t].moduleMap[i])return o(self[t].moduleMap[i]);const l=new Blob([`import * as m from '${i}';`,`${t}.moduleMap['${i}']=m;`],{type:"text/javascript"}),s=Object.assign(document.createElement("script"),{type:"module",src:URL.createObjectURL(l),onerror(){r(new Error(`Failed to import: ${e}`)),a(s)},onload(){o(self[t].moduleMap[i]),a(s)}});document.head.appendChild(s)})),self[t].moduleMap={}}}("/assets/");const y=document.querySelector("#canvasContainer"),f=new e,x=new t(55,y.offsetWidth/y.offsetHeight,.6,100),g=new o({antialias:!0,alpha:!0,canvas:document.querySelector("canvas")});g.setSize(y.offsetWidth,y.offsetHeight),g.setPixelRatio(window.devicePixelRatio),g.setClearColor(0,0);const w=new n(new a(5,50,50),new r({vertexShader:"varying vec2 vertexUV;varying vec3 vertexNormal;void main(){vertexUV=uv;vertexNormal=normalize(normalMatrix*normal);gl_Position=projectionMatrix*modelViewMatrix*vec4(position,1.0);}",fragmentShader:"uniform sampler2D globeTexture;varying vec2 vertexUV;varying vec3 vertexNormal;void main(){float intensity=1.05-dot(vertexNormal,vec3(0.0,0.0,1.0));vec3 atmosphere=vec3(0.3,0.6,1.0)*pow(intensity,1.5);gl_FragColor=vec4(atmosphere+texture2D(globeTexture,vertexUV).xyz,1.0);}",uniforms:{globeTexture:{value:(new i).load("./img/globe.jpeg")}}})),h=new n(new a(5,50,50),new r({vertexShader:"varying vec3 vertexNormal;void main(){vertexNormal=normalize(normalMatrix*normal);gl_Position=projectionMatrix*modelViewMatrix*vec4(position,0.9);}",fragmentShader:"varying vec3 vertexNormal;void main(){float intensity=pow(0.75-dot(vertexNormal,vec3(0,0,1.0)),2.0);gl_FragColor=vec4(0.3,0.6,1.0,1.0)*intensity;}",blending:l,side:s}));h.scale.set(1.1,1.1,1.1),f.add(h);const M=new c;function P({lat:e,lng:t,country:o,population:a}){const r=new n(new m(.08,.08,.8),new p({color:"#ffffff",opacity:.4,transparent:!0})),i=e/180*Math.PI,l=t/180*Math.PI,s=5*Math.cos(i)*Math.sin(l),c=5*Math.sin(i),u=5*Math.cos(i)*Math.cos(l);r.position.x=s,r.position.y=c,r.position.z=u,r.lookAt(0,0,0),r.geometry.applyMatrix4((new v).makeTranslation(0,0,-.4)),M.add(r),d.to(r.scale,{z:1.4,duration:2,yoyo:!0,repeat:-1,ease:"linear",delay:Math.random()}),r.country=o,r.population=a}M.add(w),f.add(M),x.position.z=15,P({lat:23.6345,lng:-102.5528,country:"Mexico",population:"127.6 million"}),P({lat:-14.235,lng:-51.9253,country:"Brazil",population:"211 million"}),P({lat:20.5937,lng:78.9629,country:"India",population:"1.366 billion"}),P({lat:35.8617,lng:104.1954,country:"China",population:"1.398 billion"}),P({lat:37.0902,lng:-95.7129,country:"USA",population:"328.2 million"}),w.rotation.y=-Math.PI/2,M.rotation.offset={x:0,y:0};const b={x:void 0,y:void 0,down:!1,xPrev:void 0,yPrev:void 0};console.log(M.children);const S=new u,U=document.querySelector("#popUpEl"),L=document.querySelector("#populationEl"),j=document.querySelector("#populationValueEl");!function e(){requestAnimationFrame(e),g.render(f,x),M.rotation.y+=.002,S.setFromCamera(b,x);const t=S.intersectObjects(M.children.filter((e=>"BoxGeometry"===e.geometry.type)));M.children.forEach((e=>{e.material.opacity=.4})),d.set(U,{display:"none"});for(let o=0;o<t.length;o++){const e=t[o].object;e.material.opacity=1,d.set(U,{display:"block"}),L.innerHTML=e.country,j.innerHTML=e.population}g.render(f,x)}(),y.addEventListener("mousedown",(({clientX:e,clientY:t})=>{b.down=!0,b.xPrev=e,b.yPrev=t})),addEventListener("mousemove",(e=>{if(b.x=(e.clientX-innerWidth/2)/(innerWidth/2)*2-1,b.y=-e.clientY/innerHeight*2+1,d.set(U,{x:e.clientX,y:e.clientY}),b.down){e.preventDefault();const t=e.clientX-b.xPrev,o=e.clientY-b.yPrev;M.rotation.offset.x+=.005*o,M.rotation.offset.y+=.005*t,d.to(M.rotation,{y:M.rotation.offset.y,x:M.rotation.offset.x,duration:2}),b.xPrev=e.clientX,b.yPrev=e.clientY}})),addEventListener("mouseup",(e=>{b.down=!1}));
